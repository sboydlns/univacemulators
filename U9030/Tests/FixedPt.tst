#
# Fixed point arithmetic tests
#

# A 

# Positive result
SET R1=$01000000
SET MEM $10W=$02000000
A R1,$10
TEST R1=$03000000
TEST CC=2

# Negative result
SET R1=1
SET MEM $10W=-2
A R1,$10
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET MEM $10W=-1
A R1,$10
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7FFFFFFF
SET MEM $10W=1
A R1,$10
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET MEM $10W=-1
A R1,$10
TEST R1=$7FFFFFFF
TEST CC=3

# AH 

# Positive result
SET R1=$01000000
SET MEM $10H=$0200
AH R1,$10
TEST R1=$01000200
TEST CC=2

# Negative result
SET R1=1
SET MEM $10H=-2
AH R1,$10
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET MEM $10H=-1
AH R1,$10
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7FFFFFFF
SET MEM $10H=1
AH R1,$10
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET MEM $10H=-1
AH R1,$10
TEST R1=$7FFFFFFF
TEST CC=3

# AI 

# Positive result
SET MEM $10H=$0200
AI $10,1
TEST MEM $10H=$0201
TEST CC=2

# Negative result
SET MEM $10H=1
AI $10,-2
TEST MEM $10H=-1
TEST CC=1

# Zero result
SET MEM $10H=1
AI $10,-1
TEST MEM $10H=0
TEST CC=0

# Positive overflow
SET MEM $10H=$7FFF
AI $10,1
TEST MEM $10H=$8000
TEST CC=3

# Negative overflow
SET MEM $10H=$8000
AI $10,-1
TEST MEM $10H=$7FFF
TEST CC=3

# AL

# Non zero result, no carry
SET R1=$01000000
SET MEM $10W=$02000000
AL R1,$10
TEST R1=$03000000
TEST CC=1

# Non zero result, with carry
SET R1=$FFFFFFFF
SET MEM $10W=2
AL R1,$10
TEST R1=1
TEST CC=3

# Zero result, no carry
SET R1=0
SET MEM $10W=0
AL R1,$10
TEST R1=0
TEST CC=0

# Zero result, with carry
SET R1=$FFFFFFFF
SET MEM $10W=1
AL R1,$10
TEST R1=0
TEST CC=2

# ALR

# Non zero result, no carry
SET R1=$01000000
SET R2=$02000000
ALR R1,R2
TEST R1=$03000000
TEST CC=1

# Non zero result, with carry
SET R1=$FFFFFFFF
SET R2=2
ALR R1,R2
TEST R1=1
TEST CC=3

# Zero result, no carry
SET R1=0
SET R2=0
ALR R1,R2
TEST R1=0
TEST CC=0

# Zero result, with carry
SET R1=$FFFFFFFF
SET R2=1
ALR R1,R2
TEST R1=0
TEST CC=2

# AR 

# Positive result
SET R1=$01000000
SET R2=$02000000
AR R1,R2
TEST R1=$03000000
TEST CC=2

# Negative result
SET R1=1
SET R2=-2
AR R1,R2
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET R2=-1
AR R1,R2
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7FFFFFFF
SET R2=1
AR R1,R2
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET R2=-1
AR R1,R2
TEST R1=$7FFFFFFF
TEST CC=3

# S 

# Positive result
SET R1=$02000000
SET MEM $10W=$01000000
S R1,$10
TEST R1=$01000000
TEST CC=2

# Negative result
SET R1=1
SET MEM $10W=2
S R1,$10
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET MEM $10W=1
S R1,$10
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7fffffff
SET MEM $10W=-1
S R1,$10
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET MEM $10W=1
S R1,$10
TEST R1=$7FFFFFFF
TEST CC=3

# SH 

# Positive result
SET R1=$01000000
SET MEM $10H=$0100
SH R1,$10
TEST R1=$FFFF00
TEST CC=2

# Negative result
SET R1=1
SET MEM $10H=2
SH R1,$10
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET MEM $10H=1
SH R1,$10
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7fffffff
SET MEM $10H=-1
SH R1,$10
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET MEM $10H=1
SH R1,$10
TEST R1=$7FFFFFFF
TEST CC=3

# SL

# Non zero result, with carry
SET R1=$02000000
SET MEM $10W=$01000000
SL R1,$10
TEST R1=$01000000
TEST CC=3

# Non zero result, no carry
SET R1=$0
SET MEM $10W=1
SL R1,$10
TEST R1=$FFFFFFFF
TEST CC=1

# Zero result, no carry
SET R1=0
SET MEM $10W=0
SL R1,$10
TEST R1=0
TEST CC=0

# Zero result, with carry
SET R1=$FFFFFFFF
SET MEM $10W=$FFFFFFFF
SL R1,$10
TEST R1=0
TEST CC=2

# SLR

# Non zero result, with carry
SET R1=$02000000
SET R2=$01000000
SLR R1,R2
TEST R1=$01000000
TEST CC=3

# Non zero result, no carry
SET R1=$0
SET R2=1
SLR R1,R2
TEST R1=$FFFFFFFF
TEST CC=1

# Zero result, no carry
SET R1=0
SET R2=0
SLR R1,R2
TEST R1=0
TEST CC=0

# Zero result, with carry
SET R1=$FFFFFFFF
SET R2=$FFFFFFFF
SLR R1,R2
TEST R1=0
TEST CC=2

# SR 

# Positive result
SET R1=$02000000
SET R2=$01000000
SR R1,R2
TEST R1=$01000000
TEST CC=2

# Negative result
SET R1=1
SET R2=2
SR R1,R2
TEST R1=-1
TEST CC=1

# Zero result
SET R1=1
SET R2=1
SR R1,R2
TEST R1=0
TEST CC=0

# Positive overflow
SET R1=$7fffffff
SET R2=-1
SR R1,R2
TEST R1=$80000000
TEST CC=3

# Negative overflow
SET R1=$80000000
SET R2=1
SR R1,R2
TEST R1=$7FFFFFFF
TEST CC=3

# M

# POSTIVE SINGLE WORD RESULT
SET R1=5
SET MEM $10W=2
M R0,$10
TEST R0=0
TEST R1=10

# NEGATIVE SINGLE WORD RESULT
SET R1=5
SET MEM $10W=-2
M R0,$10
TEST R0=-1
TEST R1=-10

# POSTIVE DOUBLE WORD RESULT
SET R1=$7FFFFFFF
SET MEM $10W=4
M R0,$10
TEST R0=1
TEST R1=$FFFFFFFC

# NEGATIVE SINGLE WORD RESULT
SET R1=$80000000
SET MEM $10W=2
M R0,$10
TEST R0=$FFFFFFFF
TEST R1=0

# MH

# POSTIVE RESULT
SET R1=$01000000
SET MEM $10H=2
MH R1,$10
TEST R1=$02000000

# NEGATIVE RESULT
SET R1=5
SET MEM $10H=-2
MH R1,$10
TEST R1=-10

# MR

# POSTIVE SINGLE WORD RESULT
SET R1=5
SET R2=2
MR R0,R2
TEST R0=0
TEST R1=10

# NEGATIVE SINGLE WORD RESULT
SET R1=5
SET R2=-2
MR R0,R2
TEST R0=-1
TEST R1=-10

# POSTIVE DOUBLE WORD RESULT
SET R1=$7FFFFFFF
SET R2=4
MR R0,R2
TEST R0=1
TEST R1=$FFFFFFFC

# NEGATIVE SINGLE WORD RESULT
SET R1=$80000000
SET R2=2
MR R0,R2
TEST R0=$FFFFFFFF
TEST R1=0

# D

# POSTIVE SINGLE WORD DIVIDEND
SET R0=0
SET R1=5
SET MEM $10W=2
D R0,$10
TEST R0=1
TEST R1=2

# POSTIVE SINGLE WORD DIVIDEND
SET R0=0
SET R1=5
SET MEM $10W=-2
D R0,$10
TEST R0=1
TEST R1=-2

# NEGATIVE SINGLE WORD DIVIDEND
SET R0=-1
SET R1=-5
SET MEM $10W=2
D R0,$10
TEST R0=-1
TEST R1=-2

# NEGATIVE SINGLE WORD DIVIDEND
SET R0=-1
SET R1=-5
SET MEM $10W=-2
D R0,$10
TEST R0=-1
TEST R1=2

# POSTIVE DOUBLE WORD DIVIDEND THIS SHOULD FAIL WITH DIVIDE EXCEPTION
SET R0=1
SET R1=5
SET MEM $10W=2
D R0,$10
TEST R0=1
TEST R1=5

# POSTIVE DOUBLE WORD DIVIDEND THIS SHOULD SUCCEED
SET R0=1
SET R1=5
SET MEM $10W=4
D R0,$10
TEST R0=1
TEST R1=$40000001

# DR

# POSTIVE SINGLE WORD DIVIDEND
SET R0=0
SET R1=5
SET R2=2
DR R0,R2
TEST R0=1
TEST R1=2

# POSTIVE SINGLE WORD DIVIDEND
SET R0=0
SET R1=5
SET R2=-2
DR R0,R2
TEST R0=1
TEST R1=-2

# NEGATIVE SINGLE WORD DIVIDEND
SET R0=-1
SET R1=-5
SET R2=2
DR R0,R2
TEST R0=-1
TEST R1=-2

# NEGATIVE SINGLE WORD DIVIDEND
SET R0=-1
SET R1=-5
SET R2=-2
DR R0,R2
TEST R0=-1
TEST R1=2

# POSTIVE DOUBLE WORD DIVIDEND THIS SHOULD FAIL WITH DIVIDE EXCEPTION
SET R0=1
SET R1=5
SET R2=2
DR R0,R2
TEST R0=1
TEST R1=5

# POSTIVE DOUBLE WORD DIVIDEND THIS SHOULD SUCCEED
SET R0=1
SET R1=5
SET R2=4
DR R0,R2
TEST R0=1
TEST R1=$40000001
